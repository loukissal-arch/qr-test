<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QR Scanner</title>

<script src="https://unpkg.com/html5-qrcode"></script>

<style>
body {
  margin: 0;
  background: #111;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  font-family: -apple-system, BlinkMacSystemFont, system-ui;
}

/* PHONE CANVAS */
#canvas {
  position: relative;
  width: 390px;
  height: 844px;
  background: #3B82F6;
  overflow: hidden;
}

/* MAIN BACKGROUND */
#bg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  z-index: 0;
}

/* TIME / DATE */
#datetime {
  position: absolute;
  top: 227px;
  left: 96px;
  width: 183px;
  height: 125px;
  background: white;
  color: black;
  border-radius: 12px;
  text-align: center;
  padding-top: 12px;
  z-index: 2;
}

#time {
  font-size: 48px;
  font-weight: 600;
}

#date {
  font-size: 16px;
  margin-top: 4px;
}

/* HOTSPOTS */
.hotspot {
  position: absolute;
  z-index: 3;
}

#entry {
  top: 356px;
  left: 43px;
  width: 305px;
  height: 115px;
}

#exit {
  top: 487px;
  left: 43px;
  width: 306px;
  height: 118px;
}

/* CAMERA SCREEN */
#scanner {
  position: absolute;
  inset: 0;
  display: none;
  z-index: 10;
  background: black;
}

/* CAMERA VIDEO */
#reader {
  position: absolute;
  inset: 0;
  z-index: 1;
}

/* FORCE VIDEO VISIBILITY */
#reader video {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
}

/* REMOVE html5-qrcode UI */
#reader canvas,
#reader img,
#reader .qr-shaded-region {
  display: none !important;
}

/* OVERLAY FRAME */
#cameraOverlay {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 2;
  pointer-events: none;
}
</style>
</head>

<body>

<div id="canvas">

  <!-- MAIN SCREEN -->
  <img id="bg" src="bg.jpg">

  <div id="datetime">
    <div id="time"></div>
    <div id="date"></div>
  </div>

  <div id="entry" class="hotspot"></div>
  <div id="exit" class="hotspot"></div>

  <!-- CAMERA SCREEN -->
  <div id="scanner">
    <div id="reader"></div>
    <img src="camera-overlay.png" id="cameraOverlay">
  </div>

</div>

<script>
/* TIME / DATE */
const now = new Date();
time.textContent = now.toLocaleTimeString('en-GB', { hour:'2-digit', minute:'2-digit' });
date.textContent = now.toLocaleDateString('en-US', {
  month:'2-digit',
  day:'2-digit',
  year:'2-digit'
});

let qr;

/* OPEN CAMERA */
function startScan() {
  document.getElementById("scanner").style.display = "block";

  qr = new Html5Qrcode("reader");
  qr.start(
    { facingMode: "user" },   // ðŸ¤³ SELFIE CAMERA
    {
      fps: 10,
      qrbox: undefined,       // âŒ disable default UI
      disableFlip: true
    },
    onScanSuccess
  );
}

/* CLOSE CAMERA */
function stopScan() {
  if (qr) {
    qr.stop().then(() => {
      qr.clear();
      document.getElementById("scanner").style.display = "none";
    });
  }
}

/* SUCCESS */
function onScanSuccess(text) {
  console.log("QR:", text);
  stopScan();
  alert("SUCCESS");
}

/* BUTTONS */
document.getElementById("entry").onclick = startScan;
document.getElementById("exit").onclick  = startScan;
</script>

</body>
</html>
